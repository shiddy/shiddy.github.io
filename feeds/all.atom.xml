<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>ShiddyIO</title><link href="/" rel="alternate"></link><link href="/feeds/all.atom.xml" rel="self"></link><id>/</id><updated>2022-02-16T12:00:00-07:00</updated><entry><title>ANSI Escape Codes, Terminal Games, and lots of extra work</title><link href="/ansi-escape-codes-terminal-games-and-lots-of-extra-work.html" rel="alternate"></link><published>2022-02-16T12:00:00-07:00</published><updated>2022-02-16T12:00:00-07:00</updated><author><name>Shiddy</name></author><id>tag:None,2022-02-16:/ansi-escape-codes-terminal-games-and-lots-of-extra-work.html</id><summary type="html">&lt;h1&gt;ANSI Escape Codes, Terminal Games, and lots of extra work&lt;/h1&gt;
&lt;p&gt;Do you ever have a day where you are just going through the motions, and suddenly something feels off?&lt;/p&gt;
&lt;p&gt;I had this feeling around a month ago and it's consumed a lot of my thinking since. This mixed with the …&lt;/p&gt;</summary><content type="html">&lt;h1&gt;ANSI Escape Codes, Terminal Games, and lots of extra work&lt;/h1&gt;
&lt;p&gt;Do you ever have a day where you are just going through the motions, and suddenly something feels off?&lt;/p&gt;
&lt;p&gt;I had this feeling around a month ago and it's consumed a lot of my thinking since. This mixed with the fact that I have not created a post for this site in far too long I figured now would be the best time to document everything.&lt;/p&gt;
&lt;p&gt;TL;DR lots of info below, Feel free to use the index to go to anyything specific&lt;/p&gt;
&lt;h2&gt;Index (cause this is going to get long)&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#1"&gt;Inspiration in the Unknown&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#2"&gt;What is going on?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#3"&gt;What are Escape Codes&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#4"&gt;\033 0x1b ^[&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#5"&gt;Colors in the terminal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#5"&gt;Cursor Movement with ANSI Escape Codes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#6"&gt;Finding Terminal Size with ANSI Escape Codes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#7"&gt;Mouse Events with ANSI Escape Codes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;br/&gt;&lt;/p&gt;
&lt;h1&gt;Inspiration in the Unknown &lt;a name="1"&gt;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;I was doing some maitenance on a home server that was acting pretty sluggish. Standard stuff. I sshed into the box, and started by checking the resources using &lt;a href="https://htop.dev/"&gt;htop&lt;/a&gt; and found a process that was pegging one CPU. I clicked in my browser, did some research on how to address it, and clicked back to my terminal running HTOP...&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="/images/out.gif"&gt;&lt;/p&gt;
&lt;p&gt;If you are like me, that is strange. HTOP responded to my mouse clicking the window.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="/images/double-take.gif"&gt;&lt;/p&gt;
&lt;p&gt;How did this terminal have access to my mouse? How was it able to discern where my mouse clicked in the window? I'm connected over a TTY, so it's not like it could read /dev/mouse... Will this work over PowerShell? (yes)... Wait.. Vim allows mouse input for things, does this also work over SSH? (yes)&lt;/p&gt;
&lt;p&gt;Lots of thoughts were immediatly in my head, I used to find these thoughts scary, now... I love these thoughts.&lt;/p&gt;
&lt;h2&gt;What is going on? &lt;a name="2"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;A brief look at the source code for HTOP shows that it uses &lt;code&gt;curses.h&lt;/code&gt; for rendering information to the screen. After spending some time searching in curses I pointed to a wonderful man page &lt;code&gt;man console_codes 4&lt;/code&gt; that explains what's happening in a level of detail that only a man page can show&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"The  Linux  console  implements a large subset of the VT102 and ECMA-48/ISO 6429/ANSI X3.64 terminal controls, plus certain private-mode sequences  for  changing  the  color  palette, character-set  mapping,  and  so  on."&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Specifically it has a section named "Mouse Tracking"&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"Normal tracking mode (not implemented in Linux 2.0.24) sends an escape sequence on both button press and release.  Modifier information is also sent.  It is enabled by sending ESC [  ?  1000  h  and  disabled  with  ESC [ ? 1000 l.  On button press or release, xterm(1) sends ESC [ M bxy.  The low two bits of b encode button information: 0=MB1 pressed, 1=MB2 pressed, 2=MB3 pressed, 3=release.  The upper bits encode what modifiers were down when the button was pressed and are added together: 4=Shift, 8=Meta, 16=Control.  Again x and  y are the x and y coordinates of the mouse event.  The upper left corner is (1,1)."&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img alt="" src="/images/escape-codes-mind-blown.gif"&gt;&lt;/p&gt;
&lt;h2&gt;Ok what are escape codes? &lt;a name="3"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;If you are like me the idea of escape codes was pretty muddy outside of colors in the terminal in which case you probably just imported a library and went about your day. Let's try to understand a little more; especially since the many examples of escape codes in the paragraph before (&lt;code&gt;ESC [  ?  1000  h&lt;/code&gt;) are hard to parse without more context.&lt;/p&gt;
&lt;p&gt;Before I jump to an example, I want to point out how this was a special thing that was under my nose the whole time. Have you ever looked at an ascii table?&lt;/p&gt;
&lt;p&gt;&lt;img alt="brianaspinall's ascii table" src="/images/better_ascii_table.jpg#big"&gt;
&lt;a href="http://brianaspinall.com/math-cs-cracking-the-secret-code/"&gt;sourced from briannaspinall.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The characters from the middle of the table to the end, the ones that directly map to characters on the keyboard are pretty straightforward. This ASCII table just shows the mapping between some bits in the computer, and a character humans read. This mapping was made way back in 1963 by the American Standards Association (ASA) now known as the American National Standards Institute (ANSI)&lt;/p&gt;
&lt;p&gt;Let's write a program to illuminate this!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;a_char&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;ord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a_char&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;presumably_capital_a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;65&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;chr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;presumably_capital_a&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;presumably_the_at_symbol&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x3b&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;chr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;presumably_the_at_symbol&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I'll leave you to execute those commands to see how they work, but we now can understand the special escape code in this mapping&lt;/p&gt;
&lt;h3&gt;\033 0x1b ^[ &lt;a name="4"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The Escape character esentially tells the interpreter of the ascii code that next characters should be interpreted according to the control sequences defined in by one of the following standards:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;VT102&lt;/li&gt;
&lt;li&gt;ECMA-48&lt;/li&gt;
&lt;li&gt;ISO 6429&lt;/li&gt;
&lt;li&gt;ANSI X3.64&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Let's attempt to change the color of some text as a simple example.&lt;/p&gt;
&lt;p&gt;Looking at &lt;a href="https://www.ecma-international.org/wp-content/uploads/ECMA-48_5th_edition_june_1991.pdf"&gt;the ANSI X3.64 escape codes&lt;/a&gt; we can see that after the escape code, a 38 means that we are attempting to change the forground color, but we don't get much useful information as to how.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(reserved for future standardization; intended for setting character foreground colour as specified in ISO 8613-6 [CCITT Recommendation T.416]) &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Which leaves us without an answer. Since ISO 8613-6 costs $200+ and that's not happening even if I want to know what's going on here.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TO THE INTERNET&lt;/strong&gt; ...again!&lt;/p&gt;
&lt;h3&gt;Colors in the terminal &lt;a name="5"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Searching ANSI Color Codes I finally found &lt;a href="https://en.wikipedia.org/wiki/ANSI_escape_code#24-bit"&gt;an actual explanation how to change colors&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Lets try out the 24-bit colors just to see if they work&lt;/p&gt;
&lt;p&gt;escape_test.py&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ESCAPE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;FGCOLOR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;[;38;2;&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;RED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;255;0;0&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;FGCOLOR_END&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;m&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;ESCAPE&lt;/span&gt;&lt;span class="si"&gt;}{&lt;/span&gt;&lt;span class="n"&gt;FGCOLOR&lt;/span&gt;&lt;span class="si"&gt;}{&lt;/span&gt;&lt;span class="n"&gt;RED&lt;/span&gt;&lt;span class="si"&gt;}{&lt;/span&gt;&lt;span class="n"&gt;FGCOLOR_END&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;HERE IS SOME TEXT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="red text in stdout" src="/images/escape_test.png"&gt;&lt;/p&gt;
&lt;p&gt;If you are not familiar with Python, what is happening here a simple print statement with a string format, to keep things easier to follow. We can get the same output with &lt;code&gt;printf&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[;38;2;255;0;0mHERE IS SOME TEXT&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="red text in stdout" src="/images/escape_test_printf.png"&gt;&lt;/p&gt;
&lt;p&gt;So... Huzzah! This works in my default terminal &lt;em&gt;I nievely thought and continued developing&lt;/em&gt;. But let's check the default terminal of macOS.&lt;/p&gt;
&lt;p&gt;&lt;img alt="non colored text in stdout" src="/images/term-escape-test.png"&gt;&lt;/p&gt;
&lt;p&gt;Yikes! This is not ideal. But I have colors in my terminal. so what's going on?&lt;/p&gt;
&lt;p&gt;Some terminals don't support 24-bit colours. As with most things regarding computers we are often set in the limitations of technology in the past. Many terminals have not updated to use the 24-bit colours, so let's take a step back to the &lt;a href="https://en.wikipedia.org/wiki/ANSI_escape_code#8-bit"&gt;8-bit colours on the same wikipedia article&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;instead of &lt;code&gt;\033\[;38;2;r;g;bm&lt;/code&gt; we will use &lt;code&gt;\033\[;38;5;nm&lt;/code&gt; where "n" refers to some magical calculation on the wiki:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="mf"&gt;16&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;36&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;×&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;6&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;×&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;≤&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="err"&gt;≤&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mf"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Let's try to make this work with another program:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Forground&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Standard Colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[38;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m##&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;High Intensity Colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[38;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m##&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;216 Colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;232&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[38;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m#&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;36&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Grayscale Colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;232&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[38;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m#&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Background&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Standard Colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[48;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m  &lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;High Intensity Colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[48;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m  &lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;216 Colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;232&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[48;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m &lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;36&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Grayscale Colors&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;232&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[48;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m &lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;rgb_to_8bit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;36&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;51&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Can I make some red with rgb?&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[48;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;rgb_to_8bit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m       &lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;What about purple?&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[48;5;&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;rgb_to_8bit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;m       &lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s2"&gt;[0m&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you are like me and peruse for the pictures in blogs, this next one is really nice. I don't blame you for skimming, but take some time later to read through the code here, It's a lot of &lt;strong&gt;OLD COMPUTER MAGIC!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Let's see what that looks like in my finiky terminal&lt;/p&gt;
&lt;p&gt;&lt;img alt="Colors working in old terminals" src="/images/8-bit-colour.png"&gt;&lt;/p&gt;
&lt;p&gt;Tada! we now know a bit more about escape codes. Before I can continue with mouse tracking, we will want to talk about cursor movement in the terminal to display things clearly.&lt;/p&gt;
&lt;h2&gt;Cursor Movement with ANSI Escape Codes &lt;a name="5"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;If we take an extra look at the same &lt;a href="" title="https://en.wikipedia.org/wiki/ANSI_escape_code#CSI_(Control_Sequence_Introducer)_sequences"&gt;wikipedia article&lt;/a&gt; we see a section about changing the cursor position.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Cursor Position entry in Wikipedia" src="/images/cursor_position.png#big"&gt;&lt;/p&gt;
&lt;p&gt;let's give this a try in our terminals as well.&lt;/p&gt;
&lt;h3&gt;Finding Terminal Size with ANSI Escape Codes &lt;a name="6"&gt;&lt;/a&gt;&lt;/h3&gt;
&lt;h2&gt;Mouse Events with ANSI Escape Codes &lt;a name="7"&gt;&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;When we ran &lt;code&gt;man console_codes 4&lt;/code&gt; we found the following:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"Normal tracking mode (not implemented in Linux 2.0.24) sends an escape sequence on both button press and release.  Modifier information is also sent.  It is enabled by sending ESC [  ?  1000  h  and  disabled  with  ESC [ ? 1000 l.  On button press or release, xterm(1) sends ESC [ M bxy.  The low two bits of b encode button information: 0=MB1 pressed, 1=MB2 pressed, 2=MB3 pressed, 3=release.  The upper bits encode what modifiers were down when the button was pressed and are added together: 4=Shift, 8=Meta, 16=Control.  Again x and  y are the x and y coordinates of the mouse event.  The upper left corner is (1,1)."&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This should mean that we can send &lt;code&gt;\033[?1000h&lt;/code&gt; to enable mouse input and send &lt;code&gt;\033[?1000l&lt;/code&gt; to disable mouse input to go back to normal. Lets try it out&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;printf &amp;quot;\033[?1000h&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When I click in the terminal I get some weird combination of letters and numbers and when I type in the terminal it works as expected. Let's disable the input to get our reularly functioning terminal back&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;printf &amp;quot;\033[?1000l&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I took the liberty of recording my terminal as I did this test to show the output changing whenever I moved my mouse up and down the terminal while clicking:&lt;/p&gt;
&lt;p&gt;&lt;img alt="terminal output when clicking mouse" src="/images/esc_mouse_clicks.gif#big"&gt;&lt;/p&gt;
&lt;p&gt;You might be able to see that the values printed, delimited by a # show the press and depress of the mouse at some cursor location.&lt;/p&gt;</content><category term="Technical"></category></entry><entry><title>Setting up GPG and Hardware Tokens</title><link href="/setting-up-gpg-and-hardware-tokens.html" rel="alternate"></link><published>2020-09-07T12:00:00-06:00</published><updated>2020-09-07T12:00:00-06:00</updated><author><name>Shiddy</name></author><id>tag:None,2020-09-07:/setting-up-gpg-and-hardware-tokens.html</id><summary type="html">&lt;h1&gt;GPG &amp;amp; Hardware Tokens&lt;/h1&gt;
&lt;p&gt;&lt;img alt="" src="/images/Yubikey-Header.jpeg#headimg"&gt;&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#Preamble"&gt;Preamble&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Requirements"&gt;Requirements&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Configuration"&gt;Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Our GPG key structure"&gt;Our GPG key structure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Creating the Master Cert Key"&gt;Creating the Master Cert Key&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Master Key Revocation"&gt;Master Key Revocation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Subkey Generation"&gt;Subkey Generation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Exporting our keys"&gt;Exporting our keys&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Exporting Public Keys"&gt;Exporting Public Keys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Exporting Private Keys"&gt;Exporting Private Keys&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Writing our Keys to a Yubikey"&gt;Writing our Keys to a Yubikey&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#GPG Private Key Cleanup"&gt;GPG Private Key Cleanup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Publishing our Public GPG keys"&gt;Publishing our Public GPG keys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Setting our SSH agent use our GPG keys"&gt;Setting our SSH agent …&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;h1&gt;GPG &amp;amp; Hardware Tokens&lt;/h1&gt;
&lt;p&gt;&lt;img alt="" src="/images/Yubikey-Header.jpeg#headimg"&gt;&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#Preamble"&gt;Preamble&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Requirements"&gt;Requirements&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Configuration"&gt;Configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Our GPG key structure"&gt;Our GPG key structure&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Creating the Master Cert Key"&gt;Creating the Master Cert Key&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Master Key Revocation"&gt;Master Key Revocation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Subkey Generation"&gt;Subkey Generation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Exporting our keys"&gt;Exporting our keys&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#Exporting Public Keys"&gt;Exporting Public Keys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Exporting Private Keys"&gt;Exporting Private Keys&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#Writing our Keys to a Yubikey"&gt;Writing our Keys to a Yubikey&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#GPG Private Key Cleanup"&gt;GPG Private Key Cleanup&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Publishing our Public GPG keys"&gt;Publishing our Public GPG keys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Setting our SSH agent use our GPG keys"&gt;Setting our SSH agent use our GPG keys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Adding our public key to various authorized keys"&gt;Adding our public key to various authorized keys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Setting touch behavior for Yubikey Subkeys"&gt;Setting touch behavior for Yubikey Subkeys&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Setting pin retries for Yubikey"&gt;Setting pin retries for Yubikey&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#Setting pins for your Smart Card"&gt;Setting pins for your Smart Card&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Preamble&lt;/h2&gt;
&lt;p&gt;Every time I set up a new computer there is a fair amount of time spent on getting various configs into a state I am comfortable with. Unfortunately, I don't have a means to automatically set up hardware tokens for authing into some machines so I often have to spend a day just looking up all the various commands and parameters. This post aims to make that process easier for me in the future, but also hopefully save you some time on your next gpg key setup.&lt;/p&gt;
&lt;p&gt;I also am using the &lt;strong&gt;Yubikey 5&lt;/strong&gt; because &lt;a href="https://support.yubico.com/support/solutions/articles/15000027139-yubikey-5-2-3-enhancements-to-openpgp-3-4-support"&gt;it supports the GPG 3.4 Smart Card spec&lt;/a&gt;. Allowing us to write elliptic curve keypairs to the device. If you have a yubikey 4 or lower you will have to use RSA as your algorithm for all keys in this process.&lt;/p&gt;
&lt;p&gt;I don't claim to be a cryptography expert, and what I am posting here is to the best of my knowledge the most generic use case friendly way to set up a hardware token. If you have improvements feel free to send me a pgp message with the details.&lt;/p&gt;
&lt;h2&gt;Requirements&lt;/h2&gt;
&lt;p&gt;We are ensuring we have three programs for the following:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GPG - for creating and setting keys for smart-cards&lt;/li&gt;
&lt;li&gt;PinEntry - a generic modal that will pop up when we need to enter our smart card's pin&lt;/li&gt;
&lt;li&gt;YkMan - a program that we can use to set the pins on our Yubikey, and require a human to touch it to auth&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For MacOS I assume that you are using homebrew or are able to get these programs from valid sources&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;brew install gnupg pinentry-mac ykman
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;For Linux I am using a Debian based package manager, but I trust you are able to find these packages with your specific distro.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt install gpg scdaemon libccid pinentry yubikey-manager
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Configuration&lt;/h3&gt;
&lt;p&gt;We need to tell our gpg-agent what our pinentry program is as well as that we plan to use our gpg agent for ssh&lt;/p&gt;
&lt;p&gt;for MacOS&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;echo &amp;quot;pinentry-program /usr/local/bin/pinentry-mac\nenable-ssh-support&amp;quot; &amp;gt; $HOME/.gnupg/gpg-agent.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;for Linux&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;echo &amp;quot;pinentry-program /usr/bin/pinentry\nenable-ssh-support&amp;quot; &amp;gt; $HOME/.gnupg/gpg-agnet.conf
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Our GPG key structure&lt;/h2&gt;
&lt;p&gt;What we are working towards is a single GPG master key that certifies multiple subkeys for specific actions, namely: &lt;em&gt;Authorizing&lt;/em&gt;, &lt;em&gt;Signing&lt;/em&gt;, and &lt;em&gt;Encrypting&lt;/em&gt;. When we talk about a key in this context, we are referring to a key-pair. Meaning we will be making 8 keys in total 4 private and 4 public.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Master&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Certify&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;|--&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Sub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Signing&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;|--&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Sub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Encrypting&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;--&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Sub&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Authorizing&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I understand that there are mechanisms to run this as a batch job, however I want to walk through the steps manually first.&lt;/p&gt;
&lt;h3&gt;Creating the Master Cert Key&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --expert --full-generate-key --cert-digest-algo H10
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;*Note*&lt;/strong&gt; The &lt;code&gt;--cert-digest-algo&lt;/code&gt; flag allows us to specify the hashing algorithm on these keys. By default we will see SHA256, which is fine for most everyone, but since we can specify SHA512 which will be faster on our 64-bit machines, and also make a collision with our hash much less likely. &lt;a href="https://www.gnupg.org/gph/en/manual/r2029.html"&gt;According to the Docs&lt;/a&gt; we can show the algorithms used here, but only some of them map to the globals in &lt;em&gt;gcrypt.h&lt;/em&gt; so no love on specifying whatever hash you want ¯\&lt;em&gt;(ツ)&lt;/em&gt;/¯&lt;/p&gt;
&lt;p&gt;We select &lt;code&gt;(11) ECC (set your own capabilites&lt;/code&gt; and we then toggle the signing capability &lt;code&gt;s&lt;/code&gt; which is on by default so that only the certify capability remains.&lt;/p&gt;
&lt;p&gt;&lt;img alt="gpg capability selection" src="/images/gpg-capability-selection.png"&gt;&lt;/p&gt;
&lt;p&gt;Finally we select &lt;code&gt;(Q) Finished&lt;/code&gt; to then specify the encryption algorithm. In our case we want &lt;code&gt;(1) Curve 25519&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Next we are prompted with how long we want this cert to be valid for. I normally don't like to set limits for how long a key will be used in fear that I will lose historical data. That being said, I also limit the damage that is done if these keys are compromised by creating a revocation certificate. So, I enter a &lt;code&gt;0&lt;/code&gt; and confirm with &lt;code&gt;y&lt;/code&gt; to state that my master key will not expire.&lt;/p&gt;
&lt;p&gt;Now we want to provide some information about who the key belongs to. I'll enter &lt;code&gt;shiddy&lt;/code&gt; for my name and &lt;code&gt;shiddy@shiddy.io&lt;/code&gt; for my email, and leave the comment blank. We then finalize the key creation with &lt;code&gt;(O)kay&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;At this point you may be prompted for a passphrase, &lt;strong&gt;This is different than your smart card pin&lt;/strong&gt;, and is the only thing preventing this key from being used if someone gets access to your keyring or private key storage. Make sure to set it to something secure.&lt;/p&gt;
&lt;p&gt;Congrats! We now will follow a similar sequence of steps to generate our &lt;em&gt;Authorization&lt;/em&gt;, &lt;em&gt;Encryption&lt;/em&gt;, and &lt;em&gt;Signing&lt;/em&gt; keys.&lt;/p&gt;
&lt;p&gt;If we want to confirm our key status at any time we can execute &lt;code&gt;gpg --export shiddy@shiddy.io | gpg --list-packets&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Which at this point shows that we have generated two keys &lt;code&gt;pkey[0]&lt;/code&gt; and &lt;code&gt;pkey[1]&lt;/code&gt; as well as our &lt;code&gt;digest algo H10&lt;/code&gt; as part of the signature packet.&lt;/p&gt;
&lt;p&gt;&lt;img alt="gpg list packets example" src="/images/gpg-list-packets-example.png"&gt;&lt;/p&gt;
&lt;h3&gt;Master Key Revocation&lt;/h3&gt;
&lt;p&gt;We want to make a means for us to say that this key has been compromised if we make a mistake in the future.&lt;/p&gt;
&lt;p&gt;This is important because we set this key to never expire, if our key was compromised we have no means of informing others. That being said, we also need to make sure that this revocation certificate is as secure as our Master secret key, otherwise anyone could revoke our keys.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--output shiddy\@shiddy.io.gpg-revocation-certificate --gen-revoke shiddy@shiddy.io&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The above command created a file &lt;code&gt;shiddy@shiddy.io.gpg-revocation-certificate&lt;/code&gt; which contains the revocation certificate, print it and put in in a fire-safe, slap it on a usb and put it somewhere safe but &lt;strong&gt;do not keep it on your hard drive&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;Subkey Generation&lt;/h3&gt;
&lt;p&gt;We want to create our subkeys from our master Certify key. So we will tell GPG that we want to edit this key which will drop us into a gpg prompt.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--expert --edit-key --cert-digest-algo H10 shiddy@shiddy.io&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We can then enter &lt;code&gt;addkey&lt;/code&gt; to begin the creation of a new subkey.&lt;/p&gt;
&lt;p&gt;Selecting &lt;code&gt;(11) ECC (set your own capabilities)&lt;/code&gt; again will default to &lt;em&gt;Sign&lt;/em&gt; as the only action, but we should confirm this and then Finalize our key selection with &lt;code&gt;(Q) Finished&lt;/code&gt;, &lt;code&gt;(1) Curve 25519&lt;/code&gt; for the elliptic curve we want, that it will not expire with &lt;code&gt;0&lt;/code&gt;, and a confirmation of &lt;code&gt;y&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Two more to go! Let's create our &lt;em&gt;Authenticate&lt;/em&gt; key next&lt;/p&gt;
&lt;p&gt;Invoke &lt;code&gt;addkey&lt;/code&gt; again, &lt;code&gt;(11) ECC (set your own capabilities)&lt;/code&gt; and this time only enabling the &lt;em&gt;Authorization&lt;/em&gt; capability and disabling any other capabilities. &lt;code&gt;0&lt;/code&gt; for the expiration date, and a confirmation with &lt;code&gt;y&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;One final &lt;code&gt;addkey&lt;/code&gt;, &lt;code&gt;(12) ECC (encrypt only)&lt;/code&gt;, &lt;code&gt;(1) Curve 25519&lt;/code&gt; for the elliptic curve, &lt;code&gt;0&lt;/code&gt; for the expiration date, and finally &lt;code&gt;y&lt;/code&gt; to confirm&lt;/p&gt;
&lt;p&gt;finally we want to cleanly exit gpg with &lt;code&gt;save&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Huzzah! We now have a bunch of public and private keys!&lt;/p&gt;
&lt;p&gt;If we note what is returned to us here, we can see our master key set up with &lt;code&gt;sec ed25519&lt;/code&gt; and our &lt;em&gt;Sign&lt;/em&gt; and &lt;em&gt;Authenticate&lt;/em&gt; keys as &lt;code&gt;ssb ed25519&lt;/code&gt;. However our &lt;em&gt;Encryption&lt;/em&gt; key is a &lt;code&gt;ssb cv25519&lt;/code&gt; which specifies that it's going to be using an &lt;em&gt;integrated encryption scheme&lt;/em&gt; (IES) to encrypt since the plaintext that can be encrypted in most elliptic curves is much smaller than RSA at similar bit lengths.&lt;/p&gt;
&lt;p&gt;It's also worth point out that we could create any subkey with any algorithm you desire, so if you for example worked at a place where it might not be guaranteed that you can ssh with elliptic curves, then you can reasonably only create the Authorization key as a RSA4096 while keeping the other two subkey pairs as EC25519.&lt;/p&gt;
&lt;p&gt;We can optionally add an image to this key with &lt;code&gt;addphoto&lt;/code&gt; but it's worth noting that this is going to be stored on other people's machines, and that we don't want to make the people offering free cryptography solutions sad, so limiting the size is ideal.&lt;/p&gt;
&lt;h3&gt;Exporting our keys&lt;/h3&gt;
&lt;p&gt;We are now ready to export our keys.&lt;/p&gt;
&lt;p&gt;We will export our secret keys we want to backup, as well as write to our smart card. We will also export our public keys, which we can publish to external hosts.&lt;/p&gt;
&lt;h4&gt;Exporting Public Keys&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="k"&gt;export&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;shiddy&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;shiddy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;io&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;shiddy&lt;/span&gt;\&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;shiddy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;io&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Exporting Private Keys&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="k"&gt;export&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;secret&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;keys&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;shiddy&lt;/span&gt;&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;shiddy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;io&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;shiddy&lt;/span&gt;\&lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="n"&gt;shiddy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;io&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;priv&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The two export commands we ran created two files &lt;code&gt;shiddy@shiddy.io.pub&lt;/code&gt; and &lt;code&gt;shiddy@shiddy.io.priv&lt;/code&gt; we want to save the private file one in the same place as our &lt;code&gt;shiddy@shiddy.io.gpg-revocation-certificate&lt;/code&gt; from before. Making sure to remove them from the hard drive after doing so.&lt;/p&gt;
&lt;h2&gt;Writing our Keys to a Yubikey&lt;/h2&gt;
&lt;p&gt;Let's check that our computer is able to read the smart card data. After plugging in our card we can run &lt;code&gt;gpg --card-status&lt;/code&gt; to see what cards are plugged in, as well as what Signing, Encryption, and Authentication keys are on the device.&lt;/p&gt;
&lt;p&gt;If you are not starting out fresh, you can always run &lt;code&gt;ykman piv reset &amp;amp;&amp;amp; ykman openpgp reset&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; The &lt;code&gt;ykman openpgp reset&lt;/code&gt; command resets your pin to 123456 and admin pin to 12345678. It's assumed that you know your pin and admin pin. We will change it to something else later in &lt;a href="#Setting pins for your Smart Card"&gt;Setting pins for your Smart Card&lt;/a&gt; below.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; if you find you are getting errors like &lt;code&gt;Error: Failed connecting to YubiKey ... Make sure the application have require permissions&lt;/code&gt; You might need to unplug and replug in your hardware device. We are making many changed in the course of this post and sometimes it can lock after it's been updated.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;--edit-key shiddy@shiddy.io&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Here we want to select a specific subkey with &lt;code&gt;key 1&lt;/code&gt; and then telling saying that specific key should be sent to our smart card with &lt;code&gt;keytocard&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt; You will see that the specific subkey is selected when it has an asterisk &lt;strong&gt;(*)&lt;/strong&gt; next to it&lt;/p&gt;
&lt;p&gt;Since our key selected earlier was a signature key we inform the smart card it's a signature key with &lt;code&gt;(1) Signature Key&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Tada!&lt;/p&gt;
&lt;p&gt;We can follow this patter for our &lt;em&gt;Authentication&lt;/em&gt; and &lt;em&gt;Encryption&lt;/em&gt; subkeys:&lt;/p&gt;
&lt;p&gt;Deselect our signature key with &lt;code&gt;key 1&lt;/code&gt;, select our Auth key with &lt;code&gt;key 2&lt;/code&gt;, apply it to the card with &lt;code&gt;keytocard&lt;/code&gt;, and tell the smart card it's an authentication key with &lt;code&gt;(2) Authentication Key&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="gpg keytocard example" src="/images/gpg-keytocard-example.png"&gt;&lt;/p&gt;
&lt;p&gt;Finally writing our Encryption key via: Deselecting our authentication key with &lt;code&gt;key 2&lt;/code&gt;, selecting our encryption key with &lt;code&gt;key 3&lt;/code&gt;, writing it to the card with &lt;code&gt;keytocard&lt;/code&gt;, and telling the card it's an encryption key with &lt;code&gt;(3) Encryption Key&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Now we cleanly close gpg with &lt;code&gt;save&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;GPG Private Key Cleanup&lt;/h2&gt;
&lt;p&gt;We will want to remove our private keys from GPG since they are now all written to our smart card&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --delete-secret-and-public-keys
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;We will want to import our public keys to our GPG suite since it will be able to map them to the private keys on our smart card.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;gpg&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;shiddy&lt;/span&gt;\&lt;span class="nd"&gt;@shiddy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;io&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The state of our system can be confirmed by running &lt;code&gt;gpg --card-status | tail&lt;/code&gt; and seeing whether the output is similar to the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sec#  ed25519 ...
ssb&amp;gt;  ed25519 ...
ssb&amp;gt;  ed25519 ...
ssb&amp;gt;  cv25519 ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;What this tells us is that GPG has mapped some of the public keys we imported to private keys on this card. The &lt;strong&gt;sec#&lt;/strong&gt; and &lt;strong&gt;ssb&amp;gt;&lt;/strong&gt; inform us that gpg knows of a key but it does not have direct access to it.&lt;/p&gt;
&lt;p&gt;If we want to see public keys in our keyring we can type &lt;code&gt;gpg -k&lt;/code&gt; which should show&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pub&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;sub&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;S&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;sub&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;ed25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="n"&gt;sub&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="n"&gt;cv25519&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;...&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;E&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Conversely if we want to see private keys we can type &lt;code&gt;gpg -K&lt;/code&gt; which should show output similar to the end of &lt;code&gt;gpg --card-status&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Publishing our Public GPG keys&lt;/h2&gt;
&lt;p&gt;Since we have public keys that others have to trust, we have to publish them on places that are tied to our identity. Commonly this is done with various keyservers:&lt;/p&gt;
&lt;p&gt;http://keyserver.ubuntu.com/#
http://pgp.mit.edu/
https://keyserver.pgp.com/vkd/GetWelcomeScreen.event&lt;/p&gt;
&lt;h2&gt;Setting our SSH agent use our GPG keys&lt;/h2&gt;
&lt;p&gt;I place a path variable in my .bash_profile, however if you use another shell you might want to add it to it's appropriate profile/runcommand config.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;echo&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;export SSH_AUTH_SOCK=&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;$(gpgconf --list-dirs agent-ssh-socket)&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~/.&lt;/span&gt;&lt;span class="n"&gt;bash_profile&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;remember to source your new config as well &lt;code&gt;source ~/.bash_profile&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;Adding our public key to various authorized keys&lt;/h3&gt;
&lt;p&gt;We can print our public authentication key with the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ssh-add -L
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Which can then be added to any of the expected authorized_keys files.&lt;/p&gt;
&lt;h2&gt;Setting touch behavior for Yubikey Subkeys&lt;/h2&gt;
&lt;p&gt;Here we are setting the state of the touch behavior for all our subkeys on our smart card. We have a few states to choose from.
If you would like to read more about them you can read them with &lt;code&gt;ykman openpgp set-touch -h&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Unless you are doing any scripting where you would need to ssh to a bunch of places over some reasonable period of time, set your policy to &lt;code&gt;Cached&lt;/code&gt; instead of &lt;code&gt;On&lt;/code&gt;, and if you don't want anyone to change this policy on your smart card, you can set &lt;code&gt;fixed&lt;/code&gt; or &lt;code&gt;cached-fixed&lt;/code&gt; so that it can't be changed apart from a factory reset of the yubikey.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;POLICY=&amp;quot;On&amp;quot;
ykman openpgp set-touch $POLICY SIG
ykman openpgp set-touch $POLICY AUT
ykman openpgp set-touch $POLICY ENC
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Setting pin retries for Yubikey&lt;/h2&gt;
&lt;p&gt;We have some extra protections with our Yubikey that are worth enabling. Yubikey will lock out a key if a user fails to enter the correct password a number of times. However if you are like me and use a keyboard without any labels, you might want to make these thresholds more lenient.&lt;/p&gt;
&lt;p&gt;Here I am setting the number of retries for my pin to 5, the number of reset-code retries to 5 and the number of admin-pin retries to 10&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ykman openpgp set-pin-retiries 5 5 10
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Setting pins for your Smart Card&lt;/h2&gt;
&lt;p&gt;Smart Cards generally have two pins, a pin for regular verification of the card owner, and an admin pin for making hardware changes to the smart card itself.&lt;/p&gt;
&lt;p&gt;If we fail validation with the pin a number of time above our pin retry count, we have to use the administrative pin to unlock the key. If we fail to validate the admin key in the same way, we brick our key, and would have to factory reset it.&lt;/p&gt;
&lt;p&gt;We can change these pins as well as unblock our pin with gpg, using the following command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;gpg --change-pin
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;If you have not modified this value yet, 123456 is the factory pin and 12345678 is the default administrative pin&lt;/em&gt;&lt;/p&gt;</content><category term="Technical"></category></entry><entry><title>Turn-on Tune-in Burn-out</title><link href="/turn-on-tune-in-burn-out.html" rel="alternate"></link><published>2017-09-09T00:00:00-06:00</published><updated>2017-09-09T00:00:00-06:00</updated><author><name>Shiddy</name></author><id>tag:None,2017-09-09:/turn-on-tune-in-burn-out.html</id><summary type="html">&lt;p&gt;I'm writing this at the peak of a burnout that has been lasting me for the better half of the last decade. I would like to think of myself as somewhat of an empiricist so I want to document what &lt;em&gt;this feels like&lt;/em&gt; and what this &lt;em&gt;felt like&lt;/em&gt; to determine …&lt;/p&gt;</summary><content type="html">&lt;p&gt;I'm writing this at the peak of a burnout that has been lasting me for the better half of the last decade. I would like to think of myself as somewhat of an empiricist so I want to document what &lt;em&gt;this feels like&lt;/em&gt; and what this &lt;em&gt;felt like&lt;/em&gt; to determine whether my decisions were worth it. Hopefully, those who read this can gain some insight before heading down the same road as I have.&lt;/p&gt;
&lt;p&gt;This post will span a year; starting with my efforts throughout my senior year until I have finished with my Bachelor's degree and can provide my historical perspective on my work/life balance.&lt;/p&gt;
&lt;h3&gt;Crash and Burn:&lt;/h3&gt;
&lt;h4&gt;Bleed like a Stone&lt;/h4&gt;
&lt;p&gt;I don't want to appear as though I am not comfortable, nor in hard times. However I want to in some way document my thoughts on what burnout feels like, and my approach in handling it. It's not my intention to whine about non-issues. I am trying to eke out my reasons for feeling shitty with this blog post to document my recent outlook.&lt;/p&gt;
&lt;p&gt;My life is starting to feel like a looping version of a &lt;em&gt;National's&lt;/em&gt; album. &lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://i.imgur.com/p6yy011.gif"&gt;&lt;/p&gt;
&lt;p&gt;I hear a lot of people expressing that they don't know what they want to do with their lives. I have been fortunate in being stubborn and figuring out what I wanted to do very early. I know that I wanted to work in computer security or R&amp;amp;D and I knew that I needed to get a degree to make it in those professions.&lt;/p&gt;
&lt;p&gt;I'll say it again: I am nervous to present my earnest feelings on how tired I am in these pursuits. I fear that a lot of you reading this may think, "What have you honestly done that would burn you out?"&lt;/p&gt;
&lt;p&gt;For the last five years, I have been working full-time and going to school full-time. Apart from my first year, I have not taken government money to pay tuition as I know there are others who need it more than me. From then on, I have paid for every penny of my higher education with money I have earned working. My work day starts around 8:00 am, and ends around 11:00 pm when I prepare for the next day. Personal work and leisure are for weekends when appropriate, or when not working on school/work related projects.&lt;/p&gt;
&lt;p&gt;Checking my workplace's vacation hours. I have, over the course of the last five years taken twenty-eight days off work. twenty-one of which were school or work-related, meaning that I was working rather than relaxing.&lt;/p&gt;
&lt;p&gt;I read through &lt;em&gt;Atlas Shrugged&lt;/em&gt; in my freshman year, and remember the protagonist Henry Rearden who was meant to symbolize the epitome of an objectivist. A person who was consistently productive and held himself in high esteem. He was always being told by everyone else to take a break. He persisted onward, applying intrinsic value to his work. For him, there was virtue in working through dedication and moral conviction. His worth was derived in its totality from the merits of his labor. I did, and still do, place a lot of value in being a productive and consistent person, not for productivity's sake; rather, because I find that people who are not doing interesting things are dreadful and boring. I hated conversations of pleasantry with people who didn't have new things to talk about or interesting thoughts of their own to share. &lt;/p&gt;
&lt;p&gt;I was terrified of being boring. I found pleasure when other's would correct my enunciation, so I would not make the same mistake in other's company. I have always thrashed against my peers to try to speak affluently and be interesting. I consciously decided to exert time and effort pursuing things that would widen my perspective and change my thoughts rather than spend time doing things that I found interesting. I ate up (and still do to be completely honest) quotes like:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“If you go home with somebody, and they don't have books, don't fuck 'em!” ― John Waters&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Despite not being a particularly well-read person, that idea resonated with me to the point I would read things that I hated so that I could at least say that I have read them. It made sense to pursue a career in a field that is always changing and solves interesting problems. Doing things that people could tangibly see required great effort, whether spearheading or being part of something bold. It only made sense to quit my job as an electrician and pursue higher education to work with my brain rather than my back.&lt;/p&gt;
&lt;p&gt;Without delving too far into the feelings that motivated me to dust off my blog and write about burnout and attrition. I think an image will suffice my current concerns.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://i.imgur.com/O2YXXWT.png"&gt;&lt;/p&gt;
&lt;p&gt;I am only now realizing that I am not finding any new intrinsic value in my work or my schooling. Seeing this decline in interest in learning feels horrible. Often, the work that I am doing feels so far removed from what the outside world can see that I don't feel like there is any redeeming value in the work. I can't point to a web page or inform a friend that the thing he is doing with his phone was produced by me.&lt;/p&gt;
&lt;p&gt;It's not the first time I have felt this, nor do I sincerely believe it will be the last. It is, however, the first time that I have felt this way since I had a glimpse of what I was aiming to do. I was for the first time able to see that my work was meaningful to someone and that it provided value. Weekends, where I would usually be able to suss out a couple hours of leisure after finishing my tasks, are now a marathon of guilt and dread. I can't even walk home from work on a Friday without immediately going over the work that I have to finish over the weekend so that I can have a "fresh" start to the week on Monday.&lt;/p&gt;
&lt;p&gt;It's a constant anxiety that I used to only feel while procrastinating that has bled into every thought that I have, regardless if there is anything important that actually has to get done. Strangely, this feels like a real affliction based on artificial constraints. I don't believe that if I didn't accomplish every ridiculous goal that I have set the companies I would work for would fail. I don't think that if I suddenly stopped working that really anyone would feel a huge detriment to the business. If I quit school today I don't reasonably think that I would be in less of a position to succeed in my dreams. There are enough people doing all sorts of work around me that nothing of value would be lost if I popped out of existence today.&lt;/p&gt;
&lt;p&gt;So why do I feel so stressed out and tired all the time?&lt;/p&gt;
&lt;p&gt;It feels as though every waking second I have I should be working on doing something, anything so that I don't fall behind and lose everything. The more I earn the less I feel like any of it really matters. The proportional value I see when gaining something feels less than the thought of losing something of equal value that I already struggled for. I've taken a little time to look into why I feel this way and found there is at least some evidence that humans often place a higher value on what they have rather than what they could have. &lt;a href="https://link.springer.com/article/10.1007/BF00122574"&gt;src&lt;/a&gt; While this may only be anecdotal, I can't help but harken to a time where I had nothing to prove to anyone, the aimless summers when there were no black shrouds of guilt of not being productive.&lt;/p&gt;
&lt;p&gt;I can't say that a large portion of my feelings regarding this has nothing to do with social adulation. I think that it would be easier to work on a more boring but required job if I was working for a company that was known well enough that my friends and family were familiar with a product my company provides. If I worked for Google, at least a grandparent could say "You remember Tell? The lanky one with the hair? He works for Google now." Rather than "You remember Tell? I hear he is doing well for himself with computer stuff." At least the brand awareness might make the process of reinventing the wheel more meaningful. &lt;/p&gt;
&lt;p&gt;I accept that a majority of the work that I am doing is important and that regardless of whether or not the work is glamorous or tedious, it remains a necessary step for building a company that can sustain itself. But I can't help but feel jaded at the fact that I am so muddled away in the background that even people who work in the same field as me have no idea what I do day to day.&lt;/p&gt;
&lt;p&gt;What burns the most is that after all is said and done, I hate that I have taken the skill that I have spent so long working to develop, and burned through every last bit of passion and joy I initially found in it. Recalling the days when I first thought to myself, "I can do this," where every lesson formed some piece of a cohesive whole. How every little improvement made a world of difference to how much fun it was to have to really think about what I was doing.&lt;/p&gt;
&lt;p&gt;I remember when was first learning how to program with Scratch in high school. We were tasked with making a calculator with sprites that could do basic arithmetic up to three digits on the screen. As an incomprehensibly lazy child, paired with my rather unstudious nature, I knew that if I was to complete this assignment I would have to spend a lot of time to figure out how to do it. So I spent an entire evening working out how to make this program work. To my genuine astonishment, I was able to complete the assignment in a single night. I felt genuine satisfaction as began to unravel the complexities of something as simple as a calculator and know what little piece to add to the program next. It was such a novel concept at the time to use a variable to store a value of what I wanted to put on the screen, and that I could take the output of any calculation and update that same variable and have it all work itself out!&lt;/p&gt;
&lt;p&gt;When I went to class, I remember being baffled that apart from one other student, the rest of my peers had attempted to hard-code hundreds of possibilities and ended up with programs like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;when&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="nv"&gt;pressed&lt;/span&gt;:
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nv"&gt;pressed&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="nv"&gt;pressed&lt;/span&gt;
      &lt;span class="nv"&gt;display&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="nv"&gt;pressed&lt;/span&gt;
      &lt;span class="nv"&gt;display&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
    ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;I remember feeling so gratified when I was able to explain to them how I approached the problem with my variables. Watching them observe my thoughts and then have it "click" for them, jumping back to their computers to implement something simple rather than difficult. The rest of the day I was so excited to program the next assignment that I couldn't focus on any other classes. I was completely enamored with all the possibilities of things to make. I knew that if I tried hard enough that I could make anything with my computer, and I was so genuinely excited to learn what was next. I remember specifically thinking of what I would be doing once I got "good" at computers.&lt;/p&gt;
&lt;p&gt;Now a lot of those dreams are within reach, and I can not be less interested. I get home, and you could not force me to do any projects "for fun." I don't want to listen to music, read, watch movies, or anything else to decompress; I just want to sit alone and not think about anything for once.&lt;/p&gt;
&lt;p&gt;Unlike a lot of the anecdotal stories that I have read regarding burnout, I have documented a lot of what I have done in my daily journals and can review everything that I have experienced with more granularity. Since I have started working on new and interesting things, I have found that the majority of the entries are not positive, from my personal well-being and from my outlook on others. As much of a stoic as I see myself, there are a lot of people with whom I have either fallen out of favor or others who have fallen out of favor with me.&lt;/p&gt;
&lt;p&gt;I don't think that I have unintentionally burned many bridges with people, as the ebb and flow of life pulls people in as well as pushes them away. I can say, however, that the people with whom I have decided not to interact over the course of the last few years I have no intention of interacting with into the future. I have, through years of deliberate action, pruned those out of my life who I didn't think were helping add to the narrative of my life.&lt;/p&gt;
&lt;p&gt;The entries in my journal from the earlier days were substantially less dramatic but were also a lot more innocent and hopeful. Here is a sample from a very old entry in my journal:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;... Not to imply that I am not constantly tired. Despite the constant shin splints and blisters, I will venture on, and hopefully, in time I can afford university and be somebody worth remembering. I want to live in a nice place, and spend time with people that are much smarter and more disciplined than me.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So, was my bet worth it? Do I feel more satisfied than before? Would I do it again?&lt;/p&gt;
&lt;p&gt;As with anything qualitative worth writing about, the answer lies in a gradient of yesses and nos.&lt;/p&gt;
&lt;h5&gt;Happiness &amp;amp; Other Illogical Nonsense.&lt;/h5&gt;
&lt;p&gt;I would argue that for the majority of time since the dawn of humanity people have spent the majority of their efforts singly focused on one question&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"Can I always be happy? Is there a way to ensure that happiness is my default state of being?"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As far as I, or anyone else who has looked at this question honestly, the answer is a resounding &lt;em&gt;No&lt;/em&gt;. There are at current count, 7.5 billion humans on this planet, all of whom have different goals and motivations. For the entirety of human history, no two single people can look at each other's actions and motivations and come to a complete consensus as to what the purpose of life is. There is no valid reasoning as to why no person can consistently act in accordance with that goal.&lt;/p&gt;
&lt;p&gt;It's not even comparable to any other human endeavor. It is the subconscious goal of every being on this planet to find or accept some extrinsic reason to do anything. It's why I'm writing, and why you're reading. People have locked themselves away in caves, endured extreme hardships, fasted, and writhed to perhaps glean meaning and happiness. Yet, no one has come any closer to any conclusive answers.&lt;/p&gt;
&lt;p&gt;It would be the equivalent if every single person was a scientist focusing every waking moment to determining whether or not &lt;em&gt;fire bad&lt;/em&gt; and still coming up with wildly different assertions today.&lt;/p&gt;
&lt;p&gt;I don't honestly believe that there is any true satisfaction that comes from anything intrinsic in the universe. I understand but do not like the fact that I have accepted that this is the case. That it is easier to be happy when distracted. I believe that my value and meaning in life comes only from what I personally decide to attribute meaning to.&lt;/p&gt;
&lt;p&gt;So, what is a person like me to do? I want to be happy.&lt;/p&gt;
&lt;p&gt;Someone I care about shared the following video:&lt;/p&gt;
&lt;iframe width="100%" src="https://www.youtube.com/embed/yWkq7btSQvs" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;

&lt;p&gt;After reading through my journals over the last years I have realized something. That the points where I was most happy or interested in working, I was working towards something. I only now realize that as my degree is coming to an end, and I have achieved my dream job, I don't have any particular goals that I am working toward. I guess I didn't think that I would have gotten this far by now.&lt;/p&gt;
&lt;p&gt;I feel that I have spent enough time here waxing non-poetic about burnout. But I need to start knowing what the goals in the next chapter in my life should look like.&lt;/p&gt;</content><category term="Musings"></category></entry><entry><title>The Curse of the Gifted</title><link href="/Pay%20it%20forward...%20technically.html" rel="alternate"></link><published>2016-03-05T00:00:00-07:00</published><updated>2016-03-05T00:00:00-07:00</updated><author><name>Shiddy</name></author><id>tag:None,2016-03-05:/Pay it forward... technically.html</id><summary type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;In&lt;/span&gt; &lt;span class="nv"&gt;college&lt;/span&gt;, &lt;span class="nv"&gt;I&lt;/span&gt; &lt;span class="nv"&gt;studied&lt;/span&gt; &lt;span class="nv"&gt;comp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;sci&lt;/span&gt;
&lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;class&lt;/span&gt;, &lt;span class="nv"&gt;so&lt;/span&gt; &lt;span class="nv"&gt;damned&lt;/span&gt; &lt;span class="nv"&gt;bored&lt;/span&gt; &lt;span class="nv"&gt;I&lt;/span&gt; &lt;span class="nv"&gt;could&lt;/span&gt; &lt;span class="nv"&gt;die&lt;/span&gt;.
&lt;span class="nv"&gt;convinced&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="nv"&gt;be&lt;/span&gt; &lt;span class="nv"&gt;best&lt;/span&gt;
&lt;span class="nv"&gt;showed&lt;/span&gt; &lt;span class="nv"&gt;up&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;the&lt;/span&gt; &lt;span class="nv"&gt;test&lt;/span&gt;
&lt;span class="nv"&gt;Turns&lt;/span&gt; &lt;span class="nv"&gt;out&lt;/span&gt; &lt;span class="nv"&gt;all&lt;/span&gt; &lt;span class="nv"&gt;my&lt;/span&gt; &lt;span class="nv"&gt;skills&lt;/span&gt; &lt;span class="nv"&gt;were&lt;/span&gt; &lt;span class="nv"&gt;a&lt;/span&gt; &lt;span class="nv"&gt;lie&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At this venture, I am almost done with my university education. No matter where you stand on higher education …&lt;/p&gt;</summary><content type="html">&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;In&lt;/span&gt; &lt;span class="nv"&gt;college&lt;/span&gt;, &lt;span class="nv"&gt;I&lt;/span&gt; &lt;span class="nv"&gt;studied&lt;/span&gt; &lt;span class="nv"&gt;comp&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nv"&gt;sci&lt;/span&gt;
&lt;span class="nv"&gt;in&lt;/span&gt; &lt;span class="nv"&gt;class&lt;/span&gt;, &lt;span class="nv"&gt;so&lt;/span&gt; &lt;span class="nv"&gt;damned&lt;/span&gt; &lt;span class="nv"&gt;bored&lt;/span&gt; &lt;span class="nv"&gt;I&lt;/span&gt; &lt;span class="nv"&gt;could&lt;/span&gt; &lt;span class="nv"&gt;die&lt;/span&gt;.
&lt;span class="nv"&gt;convinced&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt; &lt;span class="nv"&gt;be&lt;/span&gt; &lt;span class="nv"&gt;best&lt;/span&gt;
&lt;span class="nv"&gt;showed&lt;/span&gt; &lt;span class="nv"&gt;up&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nv"&gt;the&lt;/span&gt; &lt;span class="nv"&gt;test&lt;/span&gt;
&lt;span class="nv"&gt;Turns&lt;/span&gt; &lt;span class="nv"&gt;out&lt;/span&gt; &lt;span class="nv"&gt;all&lt;/span&gt; &lt;span class="nv"&gt;my&lt;/span&gt; &lt;span class="nv"&gt;skills&lt;/span&gt; &lt;span class="nv"&gt;were&lt;/span&gt; &lt;span class="nv"&gt;a&lt;/span&gt; &lt;span class="nv"&gt;lie&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;At this venture, I am almost done with my university education. No matter where you stand on higher education, I personally found that the experience was worth all the cost, time, and effort in one revelation.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;I am not awesome, I am ungrateful.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I want to avoid self-deprecation here. What I mean by that is that I have changed my perspective on my abilities and more importantly the way that I have to approach problems in my life. Up to the last few years of college, I believed that things should be a meritocracy. I only wanted to be judged by the abilities I had. Nothing else should be taken into account for one's ability to progress in life. And although I still feel that in an idealized world this might be something that is worth implementing, I am finding that I would most likely end up in a position that I would not enjoy. Moreover, I think that most people would find themselves unhappy, uneducated and unfulfilled.&lt;/p&gt;
&lt;p&gt;These conclusions mostly stem from recent conversations that I regret looking back on. The times when someone would tell me, in the most sincere and kind way possible, that I needed to stop treating others like they don't have anything to offer me. Nothing cuts you down quite as much as being told you're an asshole by someone you know and trust, especially when you know that they have nothing but your best interest at heart.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The Social Network&lt;/em&gt; (despite its portrayal of Mark Zuckerberg at the end of the film) explains this elegantly in the opening scene.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"...You're going to go through life thinking that girls don't like you because you're a nerd. And I want you to know, from the bottom of my heart, that that won't be true. It'll be because you're an asshole."&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The truth of the matter is that for the first time in my life I am beginning to realize that I have been that asshole. There have been countless times that I have lied about things I don't fully understand to people that were not trying to prove anything. There have been even more times when I have assumed that because someone does not know as much as me, or since they don't understand something quite as quickly as I do, that they should study more, work harder, or that they are trying to subvert actually learning by leaching what I felt I had learned.&lt;/p&gt;
&lt;p&gt;Did you catch that? I &lt;em&gt;felt&lt;/em&gt; that I had done something. Feelings are often deceptive.&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://xkcd.com/610/" src="https://imgs.xkcd.com/comics/sheeple.png"&gt;&lt;/p&gt;
&lt;p&gt;I like to think that I am some hard-working Henry Reardon, but in reality, I've really only ever been a B student. I've never truly known what it was like to try hard because the effort that I would have to exert to get an A would be more than I am honestly willing to spend. I don't know what it's like to try hard at something because most things tend to click early enough for me that I don't really worry about doing well, it tends to just happen.&lt;/p&gt;
&lt;p&gt;The limerick at the top of this post I wrote after I got my first calculus 2 test. I had gotten a 54%. Despite never really trying in the course and getting a B as a final grade, I still think about that. I failed at something. What surprised me more than my grade, however, was that people I knew around me had done much better than I. As I put my red ink soaked paper in the back of my notebook, I remember responding to a classmate that \"I did fine\" after he had asked. A few days later I found &lt;a href="https://www.vanadac.com/~dajhorn/novelties/ESR%20-%20Curse%20Of%20The%20Gifted.html"&gt;a wonderful article by Eric S. Raymond&lt;/a&gt;, wherein some of the problems I had hit were being discussed from an outside perspective. ESR called it \"the curse of the gifted\" and defines it as&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"A tendency to lean on your native ability too much, because you've always been rewarded for doing that and self-discipline would take actual work."&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I don't know if I am at this point, and to be honest the uncharted territory of being poor at something makes me hope that I never do. In the same breath, however, I know that I am not as nearly as amazing as most of the brilliant people I work with, study with, and spend time with, I am sure that a fair bit of them might feel the same way.&lt;/p&gt;
&lt;p&gt;One of the most influential people in my life was a high school English teacher that tried to instill in me the process of \"paying it forward.\" Reciprocating the gifts others had given me that I didn't really deserve. Real people, that write answers to others in forums, make how to guides, write books and take the time to share their insights to the world without seeking social adulation or fame. &lt;/p&gt;
&lt;p&gt;Thus far I have really only abused the system. I have a bookshelf overflowing with technical books that I have sought out and purchased because their insights have moved me. In them, I have gained knowledge that I deceptively tout to be my own, while the real authors deserve far more praise than I. The countless articles and manuals that I have read on tools and processes written by people that didn't even bother to pen their name to the content they were providing staggers me. People that took literal man hours to help foster knowledge in others whom they didn't know. I am not an island, and all of my success in life can be directly attributed to those who paid it forward to me.&lt;/p&gt;
&lt;p&gt;It's easy to think that when someone does not get something immediately or struggles with something I find easy, that they should simply try harder. But if I was to sum up all the hours that I had wracked my brain on a problem I find easy now, I guarantee that I would think I was a complete imbecile. Therefore, it's purely ego. I have no idea how many people I have unintentionally prevented from getting into technology because of my ego. And now that I see that in myself, I don't want to propagate my harmful outlook in others.&lt;/p&gt;
&lt;p&gt;If we as a group ever want computer science to be loved by others, we need to call out people like me for not paying it forward.&lt;/p&gt;</content><category term="Musings"></category></entry><entry><title>Phone Marketing Nonsense</title><link href="/phone-marketing-nonsense.html" rel="alternate"></link><published>2015-08-05T00:00:00-06:00</published><updated>2015-08-05T00:00:00-06:00</updated><author><name>Shiddy</name></author><id>tag:None,2015-08-05:/phone-marketing-nonsense.html</id><summary type="html">&lt;h1&gt;I don’t want a new phone.&lt;/h1&gt;
&lt;p&gt;I really don’t. I love my phone despite all its flaws. All of which are completely my fault and are not in any way the manufacturers. My phone has lasted through a personal hell:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;hours underwater when I went swimming on vacation …&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;h1&gt;I don’t want a new phone.&lt;/h1&gt;
&lt;p&gt;I really don’t. I love my phone despite all its flaws. All of which are completely my fault and are not in any way the manufacturers. My phone has lasted through a personal hell:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;hours underwater when I went swimming on vacation&lt;/li&gt;
&lt;li&gt;Being left in a snow bank for a few days when I had to hitchhike.&lt;/li&gt;
&lt;li&gt;Being dropped to the point the metal corners bent inward. (the screen is still flawless)&lt;/li&gt;
&lt;li&gt;The back camera has been broken after being punctured.&lt;/li&gt;
&lt;li&gt;Currently taped over with duct tape, both cameras only show red when active.&lt;/li&gt;
&lt;li&gt;The battery lasts around 6 hours after a full charge with no usage.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;That being said, the final straw for my pocket buddy was that HTC decided it was a good idea to start placing advertisements in the push notifications. Absolutely unacceptable.&lt;/p&gt;
&lt;p&gt;In my quest to find a decent phone I wanted to document some of the nonsense I’ve seen. I was expecting fad features. I’m looking at you “OK, Google”… and don’t think I forgot about you Mr “break me on anything galaxy edge”. Instead, I found that the marketing for cell phones the most confusing.&lt;/p&gt;
&lt;p&gt;Being cognizant of cellphone hardware no longer is a concern for an average consumer. Most phones work amazingly well. Even mediocre phones do more than an average person has time to enjoy. Distinguishing yourself as a manufacturer to your potential consumers is more akin to a popularity contest than ever. Yet, I find myself subject to less consumer vitriol online as well. Apart from short interest spikes after a release, announcements and product news does not seem to last more than a day. Keeping customers engaged with your service appears to be the holy grail of phone manufacturers.&lt;/p&gt;
&lt;h2&gt;This can be seen most clearly with Apple and OnePlus.&lt;/h2&gt;
&lt;p&gt;I need not speak of the marketing pull Apple has on the first world. They market their products as sleek, and fashionable status symbol. People have the perception that Apple iPhones are the most powerful, and are involved with the most designing effort of any modern day cell phone.&lt;/p&gt;
&lt;p&gt;This was certainly the case at the launch of the iPhone. The cell phone design paradigm was seemingly set in stone by Apple. Josh Heifferich’s image of phones before and after Apple got involved does the most justice to prove this point:&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="/images/150805-phone.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://twitter.com/Digeratii/status/165324320179109888"&gt;src&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Model&lt;/th&gt;
    &lt;th&gt;Screen Size&lt;/th&gt;
    &lt;th&gt;Storage&lt;/th&gt;
    &lt;th&gt;Removable Storage&lt;/th&gt;
    &lt;th&gt;Memory&lt;/th&gt;
    &lt;th&gt;Battery&lt;/th&gt;
    &lt;th&gt;Camera (rear)&lt;/th&gt;
    &lt;th&gt;Camera (front)&lt;/th&gt;
    &lt;th&gt;Price&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Apple iPhone 6&lt;/td&gt;
    &lt;td&gt;5.5”&lt;/td&gt;
    &lt;td&gt;16GB&lt;/td&gt;
    &lt;td&gt;No&lt;/td&gt;
    &lt;td&gt;1GB LPDDR3&lt;/td&gt;
    &lt;td&gt;2915mAh&lt;/td&gt;
    &lt;td&gt;8MP&lt;/td&gt;
    &lt;td&gt;1.2MP&lt;/td&gt;
    &lt;td&gt;$749 usd&lt;/td&gt;  &lt;/tr&gt;  &lt;tr&gt;
    &lt;td&gt;Samsung Galaxy S5&lt;/td&gt;
    &lt;td&gt;5.1”&lt;/td&gt;
    &lt;td&gt;16Gb&lt;/td&gt;
    &lt;td&gt;Yes&lt;/td&gt;
    &lt;td&gt;2GB LPDDR3&lt;/td&gt;
    &lt;td&gt;2800mAh&lt;/td&gt;
    &lt;td&gt;16MP&lt;/td&gt;
    &lt;td&gt;2MP&lt;/td&gt;
    &lt;td&gt;~$410 usd&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;&lt;a href="https://www.apple.com/shop/buy-iphone/iphone6/5.5-inch-display-16gb-silver"&gt;src&lt;/a&gt; &lt;a href="https://www.amazon.com/Samsung-SM-G900H-Unlocked-Cellphone-International/dp/B00JKSUHLU/ref=sr_1_1"&gt;src&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;CPU&lt;/th&gt;
    &lt;th&gt;Cores&lt;/th&gt;
    &lt;th&gt;Clock Speed&lt;/th&gt;
    &lt;th&gt;CL1Cashe (Data)&lt;/th&gt;
    &lt;th&gt;Architecture&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Apple A8&lt;/td&gt;
    &lt;td&gt;2&lt;/td&gt;
    &lt;td&gt;1.4 GHz&lt;/td&gt;
    &lt;td&gt;64Kb/Core&lt;/td&gt;
    &lt;td&gt;Harvard&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;SnapDragon 805&lt;/td&gt;
    &lt;td&gt;4&lt;/td&gt;
    &lt;td&gt;2.7 GHz&lt;/td&gt;
    &lt;td&gt;16Kb/Core&lt;/td&gt;
    &lt;td&gt;Harvard&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;

&lt;p&gt;What makes Apple so ubiquitous is clearly it’s advertising and word of mouth. They have built a reputation of having the highest quality phones used by the most famous people. As of my typing of this, they sell a watch for $17,000. Which is only $7,000 difference between their cheapest gold watch. The price difference is due entirely to a watchband color.
I don’t want to spend time berating those who want to own these devices, nor spend space on my server dissecting why we are willing to pay more for status. Apple is the most clear example of how marketing is he most important factor in the success of mobile consumer technology, and sets the bar pretty high.&lt;/p&gt;
&lt;h2&gt;Which brings me to OnePlus&lt;/h2&gt;
&lt;p&gt;OnePlus is an attempt to build a company identity that has failed in all the right ways. Most people are not aware that this company is owned by Oppo Electronics. I as most others believed that the company was akin to a startup or scaling company. According to most press at the time of their launch the general consensus was that this company was a small group built on creating high-end mobile products at ridiculously cheap prices. I managed to find an article I read a couple years ago after first hearing about the company.&lt;/p&gt;
&lt;p&gt;“For years, building a smartphone was only a possibility for the biggest of tech companies, but more and more small manufacturers have begun throwing their hats in the ring — from Jolla, to Blu Products, to Yota Devices. OnePlus is the latest in that ilk of small manufacturers” 
&lt;a href="https://www.theverge.com/2013/12/16/5217794/oppo-ex-vice-president-pete-lau-launches-oneplus"&gt;src&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Not that I put much stock in the Verge, but this understanding was rather prevalent throughout my following of OnePlus. There is a world of difference between “small manufacturers” and a subsidiary of Oppo electronics. Regardless of the intent, or the relativism of the word “small” defining their business, this attempt to change public perception worked. Therefore, their marketing pitch of overthrowing the status quo as a small new manufacturer was alluring to most of the hipsters (myself included)&lt;/p&gt;
&lt;p&gt;Then rolled in the invites… If you want to purchase a OnePlus 2 (silly name aside) you have to sign up to be on a waiting list which automatically increases your queue placement based on how many referrals you generate. These referrals are generated through getting others to sign up and join the queue as well. It does not matter whether you were signed up first, it matters that you have more referrals than others.&lt;/p&gt;
&lt;p&gt;&lt;img alt="" src="https://media.giphy.com/media/7wToiGB3M5wME/giphy.gif"&gt;&lt;/p&gt;
&lt;p&gt;I don’t think that it’s reasonable to toady your potential customers around the way that the marketing team for OnePlus demands in order for you to buy their products. I’m absolutely anti-spam and anti-solicitation. Their invite system will artificially force people abusing the system or spamming to the top of the queue. This is not even that hard for people to accomplish anymore. &lt;a href="https://medium.com/@JakeCooper/how-i-hacked-the-oneplus-reservation-system-120ea1a7ad82"&gt;There are articles showing how it's possible and has been done already.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Evangelical marketing schemes like what OnePlus has implemented uproot the trust that we have in communally identifying worthwhile products. This is the most upsetting because the OnePlus 1 &amp;amp; 2 are more than powerful enough to get started through grass roots and word of mouth legitimatly. I would own one already if it were not for their marketing bogus.&lt;/p&gt;
&lt;p&gt;Here is a good bit of advice for people who think this is not all that bad. If you are told that you have to tell other people how good something is before you can own it, it’s probably not a good thing.&lt;/p&gt;
&lt;p&gt;It’s rather unfortunate that I’m beginning to have to play detective for company selling anything to see whether it’s a giant marketing ploy…&lt;/p&gt;</content><category term="Random"></category></entry></feed>